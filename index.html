<!DOCTYPE html>
<html lang="en" data-color-scheme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ISHTRIKSHA - Women's Safety (RAKSHA)</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <!-- Splash Screen -->
    <div id="splash" class="splash-screen">
      <div class="splash-content">
        <div class="logo">
          <h1>ISHTRIKSHA</h1>
        </div>
        <div class="sanskrit">Raksha - Women's Safety</div>
        <div class="loading-spinner" aria-label="Loading"></div>
      </div>
    </div>

    <!-- App Container -->
    <div id="app" class="app-container hidden">
      <!-- Header -->
      <header class="app-header">
        <div class="header-content">
          <div class="logo-small">
            <h2>ISHTRIKSHA</h2>
          </div>
          <div class="user-info" id="userWelcome">Hi</div>
        </div>
      </header>

      <!-- Emergency Banner -->
      <div id="emergencyBanner" class="emergency-banner hidden" role="region" aria-live="polite">
        <div class="emergency-content">
          <div class="emergency-icon">üö®</div>
          <div class="emergency-text">
            <strong>Emergency Session Active</strong>
            <p>
              Session <span id="sessionId">‚Äî</span> started at
              <span id="sessionTime">‚Äî</span>. Sharing location and notifying contacts...
            </p>
          </div>
          <button id="stopEmergency" class="btn btn--secondary">Stop</button>
        </div>
      </div>

      <!-- Main -->
      <main class="main-content">
        <div class="container">
          <!-- Home Screen -->
          <section id="homeScreen" class="screen active" aria-labelledby="homeTitle">
            <div class="screen-header">
              <h2 id="homeTitle">Dashboard</h2>
              <div class="status status--info">Stay safe. We're here with you.</div>
            </div>

            <!-- Status Grid -->
            <div class="status-grid">
              <div class="status-card">
                <div class="status-icon">üìç</div>
                <div>
                  <p class="status-label">Location Sharing</p>
                  <p class="status-value" id="locationStatus">‚Äî</p>
                </div>
              </div>
              <div class="status-card">
                <div class="status-icon">üë•</div>
                <div>
                  <p class="status-label">Contacts</p>
                  <p class="status-value"><span id="contactCount">0 Added</span></p>
                </div>
              </div>
            </div>

            <!-- SOS Button -->
            <div class="sos-container">
              <button id="sosButton" class="sos-button" aria-label="Trigger SOS">
                <span class="sos-text">SOS</span>
                <span class="sos-subtitle">Tap to start</span>
              </button>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
              <h3>Quick actions</h3>
              <div class="action-grid">
                <button class="action-card" data-action="location" aria-label="Share Location">
                  <div class="action-icon">üó∫Ô∏è</div>
                  <div class="action-label">Share Location</div>
                </button>
                <button class="action-card" data-action="contacts" aria-label="Manage Contacts">
                  <div class="action-icon">üìí</div>
                  <div class="action-label">Manage Contacts</div>
                </button>
                <button class="action-card" data-action="history" aria-label="View History">
                  <div class="action-icon">üïì</div>
                  <div class="action-label">View History</div>
                </button>
                <button class="action-card" data-action="test" aria-label="Send Test Alert">
                  <div class="action-icon">‚úÖ</div>
                  <div class="action-label">Send Test Alert</div>
                </button>
              </div>
            </div>

            <!-- Emergency Numbers -->
            <section class="emergency-numbers" aria-labelledby="emergencyNumbersTitle">
              <h3 id="emergencyNumbersTitle">Emergency Numbers</h3>
              <div class="numbers-grid">
                <a class="emergency-number" href="tel:112">
                  <div class="number">112</div>
                  <div class="label">Emergency</div>
                </a>
                <a class="emergency-number" href="tel:1091">
                  <div class="number">1091</div>
                  <div class="label">Women Helpline</div>
                </a>
                <a class="emergency-number" href="tel:181">
                  <div class="number">181</div>
                  <div class="label">Women Helpline (Alt)</div>
                </a>
              </div>
            </section>
          </section>

          <!-- Contacts Screen -->
          <section id="contactsScreen" class="screen" aria-labelledby="contactsTitle">
            <div class="screen-header">
              <h2 id="contactsTitle">Emergency Contacts</h2>
              <button id="addContactBtn" class="btn btn--primary">Add Contact</button>
            </div>

            <div class="contacts-info">
              <p>You can add up to 10 trusted contacts. Higher priority contacts will be notified first.</p>
            </div>

            <div class="mb-8" style="color: var(--color-text-secondary);">
              Total contacts: <strong id="contactsCount">0</strong>
            </div>

            <div id="contactsList" class="contacts-list"></div>
          </section>

          <!-- History Screen -->
          <section id="historyScreen" class="screen" aria-labelledby="historyTitle">
            <div class="screen-header">
              <h2 id="historyTitle">Emergency History</h2>
            </div>
            <div id="historyList" class="history-list"></div>
          </section>

          <!-- Settings Screen -->
          <section id="settingsScreen" class="screen" aria-labelledby="settingsTitle">
            <h2 id="settingsTitle" class="mb-8">Settings</h2>

            <div class="settings-sections">
              <div class="settings-section">
                <h3>Emergency</h3>

                <div class="setting-item">
                  <div class="setting-info">
                    <label for="sosTimeout">SOS Confirmation Timeout</label>
                    <p class="setting-description">
                      Seconds before SOS actually triggers. Set to 0 to trigger immediately.
                    </p>
                  </div>
                  <select id="sosTimeout" class="form-control" style="max-width: 140px;">
                    <option value="0">0s</option>
                    <option value="3">3s</option>
                    <option value="5">5s</option>
                    <option value="10">10s</option>
                  </select>
                </div>

                <div class="setting-item">
                  <div class="setting-info">
                    <label for="audioRecording">Auto Audio Recording</label>
                    <p class="setting-description">Automatically start audio recording when SOS triggers.</p>
                  </div>
                  <label class="toggle" aria-label="Toggle audio recording">
                    <input type="checkbox" id="audioRecording" />
                    <span class="toggle-slider"></span>
                  </label>
                </div>

                <div class="setting-item">
                  <div class="setting-info">
                    <label for="locationSharing">Share Location</label>
                    <p class="setting-description">
                      Share your live location with your emergency contacts during SOS.
                    </p>
                  </div>
                  <label class="toggle" aria-label="Toggle location sharing">
                    <input type="checkbox" id="locationSharing" />
                    <span class="toggle-slider"></span>
                  </label>
                </div>

                <div class="setting-item">
                  <div class="setting-info">
                    <label for="dataRetention">Data Retention</label>
                    <p class="setting-description">How long to keep history on this device.</p>
                  </div>
                  <select id="dataRetention" class="form-control" style="max-width: 140px;">
                    <option value="7">7 days</option>
                    <option value="30">30 days</option>
                    <option value="90">90 days</option>
                  </select>
                </div>
              </div>

              <div class="settings-section">
                <h3>Police Station Lookup</h3>
                <div class="pin-lookup">
                  <div style="flex: 1;">
                    <label class="form-label" for="pinCode">Enter PIN code</label>
                    <input id="pinCode" class="form-control" placeholder="e.g. 110001" maxlength="6" />
                  </div>
                  <button id="lookupBtn" class="btn btn--primary">Lookup</button>
                </div>
                <div id="stationsList" class="stations-list hidden"></div>
              </div>
            </div>
          </section>
        </div>
      </main>

      <!-- Bottom Navigation -->
      <nav class="bottom-nav" aria-label="Primary">
        <button class="nav-item active" data-screen="homeScreen" aria-label="Home">
          <div class="nav-icon">üè†</div>
          <div class="nav-label">Home</div>
        </button>
        <button class="nav-item" data-screen="contactsScreen" aria-label="Contacts">
          <div class="nav-icon">üë•</div>
          <div class="nav-label">Contacts</div>
        </button>
        <button class="nav-item" data-screen="historyScreen" aria-label="History">
          <div class="nav-icon">üïì</div>
          <div class="nav-label">History</div>
        </button>
        <button class="nav-item" data-screen="settingsScreen" aria-label="Settings">
          <div class="nav-icon">‚öôÔ∏è</div>
          <div class="nav-label">Settings</div>
        </button>
      </nav>
    </div>

    <!-- Contact Modal -->
    <div id="contactModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="contactModalTitle">
      <div class="modal-overlay"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="contactModalTitle">Add Emergency Contact</h3>
          <button id="closeContactModal" class="modal-close" aria-label="Close">√ó</button>
        </div>
        <form id="contactForm" class="modal-body">
          <input type="hidden" id="contactId" />
          <div class="form-group">
            <label class="form-label" for="contactName">Name</label>
            <input id="contactName" class="form-control" placeholder="e.g. Mom" required />
          </div>
          <div class="form-group">
            <label class="form-label" for="contactPhone">Phone</label>
            <input id="contactPhone" class="form-control" placeholder="+91XXXXXXXXXX" required />
          </div>
          <div class="form-group">
            <label class="form-label" for="contactRelationship">Relationship</label>
            <select id="contactRelationship" class="form-control" required>
              <option value="">Select</option>
              <option>Mother</option>
              <option>Father</option>
              <option>Brother</option>
              <option>Sister</option>
              <option>Spouse</option>
              <option>Friend</option>
              <option>Guardian</option>
              <option>Other</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label" for="contactPriority">Priority</label>
            <select id="contactPriority" class="form-control" required>
              <option value="1">1 (Highest)</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 (Lowest)</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label" for="notificationMethod">Notify By</label>
            <select id="notificationMethod" class="form-control" required>
              <option value="call_and_sms">Call + SMS</option>
              <option value="call_only">Call only</option>
              <option value="sms_only">SMS only</option>
            </select>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn--primary">Save</button>
            <button id="cancelContact" type="button" class="btn btn--outline">Cancel</button>
          </div>
        </form>
      </div>
    </div>

    <!-- SOS Countdown Modal -->
    <div id="sosModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="sosModalTitle">
      <div class="modal-overlay"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="sosModalTitle">Confirm SOS</h3>
          <button id="cancelSos" class="modal-close" aria-label="Cancel">√ó</button>
        </div>
        <div class="modal-body">
          <div class="sos-countdown">
            <div>Triggering SOS in</div>
            <div class="countdown-circle" id="countdownNumber">5</div>
            <div>Tap the √ó to cancel</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="successTitle">
      <div class="modal-overlay"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="successTitle">Success</h3>
          <button id="closeSuccess" class="modal-close" aria-label="Close">√ó</button>
        </div>
        <div class="modal-body">
          <div class="success-content">
            <div class="success-icon">‚úÖ</div>
            <p id="successMessage">Done!</p>
            <div class="modal-footer">
              <button id="closeSuccess2" class="btn btn--primary" onclick="document.getElementById('successModal').classList.add('hidden')">OK</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="./app.js"></script>
  </body>
</html>